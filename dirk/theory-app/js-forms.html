<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FORMS</title>
</head>

<h1>FORMULARE</h1>
<a href="#fieldset">fieldset</a>
<!-- action="#" -->
<form  id="firstForm" action  method="GET" >
    <pre>
        action beim Tag form erwartet als Inhalt den Pfad zu der Datei auf der Server
        die, die Formular-Einträge bearbeiten soll
        Unterschied zu Select Option kann der Benutzer bei DataList noch eigene Eingaben machen
        autocomplete - filtern beim Tippen 
        2 inputs dürfen die gleiche Data-Liste benutzen
    </pre> 


    <section id="datalist">
        <h2>Datalist & Autovervollständigung</h2>
        <pre>
            Mit Datalist kann man dem Benutzer schon verbereite Einträge anbieten.
            Seine eigenen Eingaben sind auch möglich.


            - RESTClient für Mozilla
            - Postman: Tool für ServerTests

        </pre>
        <!-- ComboBox in .NET -->
        <input type="text" id="inp1" list="farben" autocomplete="on" tabindex="2"/>
        <!-- autocomplete - filtern beim Tippen -->
        <!-- 2 inputs dürfen die gleiche Data-Liste benutzen -->
        <!-- <input type="text" id="inp2" list="farben" autocomplete="on" /> -->
        <!--  -->
        <datalist id="farben">
            <option value="Rot"></option>
            <option value="Grün"></option>
            <option value="Blau"></option>
        </datalist>
        <button id="btn1" type="button">OK</button>
        <!-- Alternativ zu button: 
            <input type="button" value=OK> -->
        <output id="outp1"></output>
    </section>
    <hr>


    <section id="fieldset">
        <h2>fieldset</h2>
        <pre>
            Fieldset wird wie ein Rahmen für mehrere Inputs. 
            In Ledgend wird die Beschreibung für das Fieldset geschrieben.
            Hinweise bei email-Feld kommen automatisch vom Browser
            Placeholder: grauer Hinweis direkt im Input Feld. 
            Attribut value: Anfangswert z.B. @gmail.com
            Attribut Title: tooltip bei Mouseover
            Attribut Pattern: RegExp, welche beim Validieren der Eingaben gesetzt werden
            Validierungstexte von Eingabefeldern mit Pattern werden vom Brwoser erzeugt und ausgegeben
            In Docs werden Inputs in Labels platziert.
            Über Attribute for bei label und ID bei Input werden die beiden Verbunden. 
            (Klick auf Label Focussiert das Input Feld)
            Buttons haben mehrere types: submit, button,reset menu) default is submit 
            Submit gibt es nur bei Formularen (siehe letzte Section).
        </pre>
        <p>Eingabe aus Input wird beim Klick auf Button in Output angezeigt</p>
        <fieldset>
            <legend>NAME</legend>
            <label for="fname">VORNAME
                <input id="fname" type="text" placeholder="Max" required />
                <!-- <input id="fname" type="text" value="Max" /> -->
                <!-- value - Anfangswert von Input, den man aber überschreiben kann -->
            </label>

            <label for="lname">NACHNAME
                <input id="lname" type="text" placeholder="Mustermann" title="title test ohne pattern" />
                <!-- title ist ein tooltip, den man sieht, wenn man mit der Maus drüber fährt -->
            </label>
            <label for="inpEmail">EMAIL
                <input id="inpEmail" type="email" name="" value="@gmail.com" pattern="^.+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$"
                    title="Achte auf RegExp" /></label>

            <button id=btn_fieldset type="button">zeige die Eingabe</button>
            <!-- <button type="button" onclick="showInputValue()">zeige die Eingabe</button> -->
        </fieldset>
        <output id="outp2"></output>
        <hr />
    </section>



    <section id=inpBtn>
        <h2>input:button</h2>
        <pre>
            2 Möglichkeiten für Buttons: button:button und input:button
        <!-- bei Edge aucht button mit type=button ruft submit auf -->
     </pre>
        <button id=btnBtn type=button>OK</button>
        <input id=inpBtn type=button value=OK>
    </section>


    <section id="input:color">
        <pre>
            Die Farben werden hier im Hexadezimalen Format ausgegeben.
        </pre>
        <h2>input:color</h2>
        <input id=crlId type=color name=clr  tabindex=3 />
        <input id=btnColor type=button value=OK>
        <!-- <button id=btnColor type=button>OK</button> -->
        <!-- bei Edge aucht button mit type=button ruft submit auf -->
        <output id=outpColor></output>
        <!-- Farben kommen in der hexadezimalen Syntax als string rein -->
        <hr />
    </section>

  

    <section id=input:radio>
        <h2>input:radio</h2>
        <h3>Matrixfrage links / rechts</h3>
        <pre>
            Inputs von type radio sind durch Attr name verbunden.
            Der muss den gleichen Wert haben.
            Bei radio haben die inputs die Eigenschaft checked
        </pre>
        <div>
            <label for="leftblau">blau
                <input type="radio" id="leftblau" value="blau" name="additional" />
            </label>
        </div>
        <div>
            <label for="rightrot">rot
                <input type="radio" id="rightrot" value="rot" name="additional" />
            </label>
        </div>
        <output id="outRadio"></output>
        <hr />
    </section>

    <section id=input:checkbox>
        <h2>input:checkbox</h2>
        <h3>Pizzaextras</h3>
        <div>
            <label for="cheese">
                <input type="checkbox" id="cheese" name="inpCheck" value="Käse" />
                Käse</label>
        </div>
        <div>
            <label for="salami">
                <input type="checkbox" id="salami" name="inpCheck" value="Salami" />
                Salami</label>
        </div>
        <div>
            <label for="mushrooms">
                <input type="checkbox" id="mushrooms" name="inpCheck" value="Pilze" />
                Pilze</label>
        </div>
        <div>
            <label for="pineapple">
                <input type="checkbox" id="pineapple" name="inpCheck" value="Ananas" />
                Ananas</label>
        </div>
        <button type="button" id="btnPizza">OK</button>
        <output id="outPizza"></output>
        <hr />
    </section>

    <section id=input:range>
        <h2>input:range</h2>
        <h3>Hotelzimmerabfrage</h3>
        <div>
            <label for="inpPrice">Zimmerpreis: </label>
            <span id="minSpan"></span>
            <input type="range" id="inpPrice" min="20" max="200" step="5" value="70" />
            <span id="maxSpan"></span>
            <span>| Ihr ausgewählter Preis: </span>
            <output id="outpPrice"></output>
        </div>
        <hr />
    </section>

    <section id=progmeter>
        <pre>
            End-Tags sind obligatorisch.
            Das sind keine interaktiven Elemente
        </pre>
        <progress id=progressId>rerrer</progress>
        <meter id=meterId min="20" max="200"  value="70"></meter>
        <hr>
     </section>


    <section id=try-catch>
        <h2>min max & try catch</h2>
        <p>
            Beim Alter 7-16 - Kindermarathon, 17-65 - Marathon, 65-75 - Marathon mit
            Zusatzversicherung, 75-... - Teilnahme nicht möglich
        </p>
        <label for="inpAge">Ihr Alter:</label>
        <!-- Mit Attribut for bei Label und id bei input werden diese beiden 
                    Elemente verbunden. Beim Klicken auf label-Text erscheint Kursor im Input-Feld -->
        <input type="number" id="inpAge" min="7" max="99" />
        <!-- <button type="button" id="btnAge">OK</!--> 
        <input type="button" id="btnAge" value=OK>
        <output id="outInfo"></output>

        <hr>
    </section>

    <section id=validate-date>
        <h2>Datumvalidierung</h2>

        <fieldset id="person">
            <legend>Person</legend>
            <div class="inpItem"><input id="inpVNameId" type="text" placeholder="Vorname"></div>
            <div class="inpItem"><input id="inpNNameId" type="text" placeholder="Nachname"></div>
            <div class="inpItem"><input id="inpGebDatId" type="date" title="Geburtsdatum"></div>
        </fieldset>
        <fieldset id="pass">
            <legend>Pass</legend>
            <div class="inpItem"><input id="inpPassNrId" type="text" placeholder="ReisepassNr" pattern="^[A-Z0-9]{6,}$">
            </div>
            <div class="inpItem"><input id="inpBehördeId" type="text" placeholder="Ausstellende Behörde"></div>
            <div class="inpItem"><label for="inpAusstDatId">Ausstellungsdatum<input id="inpAusstDatId" type="date"
                        title="Ausstellungsdatum"></label> </div>
            <div class="inpItem"><label for="inpAblDatId">Ablaufsdatum<input id="inpAblDatId" type="date"
                        title="Ablaufsdatum"></label> </div>
            <div class="inpItem">
                <input type="button" id="btnValidatePassId" value="OK">
            </div>
            <div id="infoMessageDiv"></div>

        </fieldset>

    </section>

    <section id=input:url>
        <h2>input:url</h2>
        <input type="url" name="" id="inpUrl" value="https://">
        <!-- <input type="url" name="" id="inpUrl2" pattern="www\.web\.com"> -->
        <hr>
    </section>

    <section id=input:search>
        <h2>input:search</h2>
        <p>in Chrome und Edge erscheint ein Kreuz zum Löschen von der Eingabe</p>
        <input type="search" name="" id="inpSearch">
        <hr>
    </section>

    <section id="input:file">
        <h2>input:file</h2>
        <input type="file" name="" id="inpFile">
        <hr>
    </section>
    
    <section id="submitevent">
        <h2>submitevent</h2>
        <pre>
            default-Wert vom Attribut type bei einem button innerhalb von form-Tag 
            ist submit!
            Beim Event submit werden alle Input Felder vom Brwoser durchgelaufen und geprüft, ob die 
            Benutzereingabenden gestellten bedingungen entsprechen.
            Bei den Handlern von Submit-Event sollte man die Funktion anders als 'checkValidity' nennen.
            Der Name ist reserviert

            Wenn die validity true ist wird die Seite neu geladen

            Ohne das Attribut action wird das Neuladen der Seite verhindert
        </pre>
        <button>OK</button>

    </section>
    
    <section id="docforms">
        <h2>document.forms</h2>
<pre>
    In der automatisch erstellten collection forms sind alle Formulare mit ihren Input Feldern aufgelistet. 
    Input-Felder sind mit ihren IDs erwähnt.
</pre>
    </section>
</form>

<script>
    /* INPUT & DATALIST */
    /* Hey btn1, wenn bei dir ein click-event vorkommt, nimm den Handler 'showCol' */
    btn1.addEventListener("click", showColor)
    function showColor() {
        let color = document.getElementById('inp1').value;
        document.getElementById('outp1').textContent = color;
    }

    // FIELDSET
    btn_fieldset.addEventListener('click', showInputValue)
    function showInputValue() {
        let text;
        text = fname.value + " " + lname.value;
        outp2.textContent = text;
    }

    // INPUT:COLOR
    btnColor.addEventListener('click', giveCol)
    function giveCol() {
        outpColor.innerText = crlId.value
    }
    
    // RADIO
    /* Idee: Wahl des Benutzers abfragen */
    // leftblau.addEventListener('input', showRadioCheck)
    // rightrot.addEventListener('input', showRadioCheck)
    function showRadioCheck() {
        if (leftblau.checked) {
            outRadio.innerText = 'blau wurde gewählt'
        } else {
            outRadio.innerText = 'rot wurde gewählt'

        }
    }
    /* Option mit dem Event-Object */
    leftblau.addEventListener('input', showRadioCheckMitEventO)
    rightrot.addEventListener('input', showRadioCheckMitEventO)
    function showRadioCheckMitEventO(event) {
        outRadio.innerText = event.target.value + ' wurde gewählt!'
    }
    /* Beachte, dass der Event-Handler mit einem Argument definiert ist. 
    Der Methode `addEventListener` sollte das aber nicht mitgeteilt werden */


    // CHECKBOX    
    btnPizza.addEventListener('click', getSelected)
    function getSelected() {
        outPizza.textContent = "";
        // console.log('hallo aus getSelected');
        const extrasArr = document.getElementsByName("inpCheck"); // NodeList
        console.log(extrasArr);
        // extrasArr.forEach(function (el) { return outPizza.innerText += el.checked; });
        extrasArr.forEach(el => {
            if (el.checked) {
                outPizza.textContent += el.value + " ";
                el.checked = false
            }
        });
    }


    // RANGE
    minSpan.textContent = inpPrice.min;
    maxSpan.textContent = inpPrice.max;
    function showPrice() {
        // console.log(inpPrice); // ist ein Objekt, welches dem HTML-Element entspricht
        outpPrice.textContent = inpPrice.value;
    }
    inpPrice.addEventListener("input", showPrice);
    showPrice()


    // Progress and meter
    let intId = setInterval(() => {
        meterId.value += 5
        // console.log('meterId.value :', meterId.value);
        if(meterId.value >= meterId.max){
            clearInterval(intId)
        }

    },500)


    
    // #region TRY CATCH FINALLY

    function trycatch() {
        let inpValue = inpAge.value;
        let errorMessage;
        console.log(typeof inpValue);
        try {
            /* beim leeren Input und beim Text kommt ein leeres String zurück */
            if (inpValue === "") {
                throw "Bitte geben Sie eine Zahl ein";
            }
            if (inpValue < 7) {
                throw "zu jung";
            }
            if (inpValue > 75) {
                throw "Teilnahme nicht möglich";
            }
        } catch (errorMessage) {
            outInfo.textContent = "Error Message: " + errorMessage;
        } finally {
            if (inpValue >= 7 && inpValue <= 16) {
                outInfo.textContent = "Willkommen beim Kindermarathon";
            }
            if (inpValue >= 17 && inpValue <= 65) {
                outInfo.textContent = "Willkommen beim Marathon";
            }
            if (inpValue >= 66 && inpValue <= 75) {
                outInfo.textContent =
                    "Willkommen beim Marathon, bitte beachten Sie die Anforderungen für Senioren";
            }
        }
    }
    btnAge.addEventListener("click", trycatch);

    //#endregion


    /* /////////////DATUMVALIDIERUNG / DATUMPLAUSIBILITÄT ////////////// */
    btnValidatePassId.addEventListener("click", myFunction);

    function myFunction() {
        console.info('Geburtsdatum')
        console.log('inpGebDatId :', inpGebDatId);
        console.log('typeof inpGebDatId :', typeof inpGebDatId);
        console.log(inpGebDatId.valueAsNumber) // 1583884800000
        console.log('inpGebDatId.value :', inpGebDatId.value); // 2020-03-11
        console.info('Ausstellungsdatum')
        console.log(inpAusstDatId.valueAsNumber)
        console.info('Ablaufsdatum')
        console.log(inpAblDatId.valueAsNumber)

        var errMessage;
        let twenty = 6.307e+11; //20 jahre

        try {
            if (inpGebDatId.valueAsNumber > inpAusstDatId.valueAsNumber) {
                throw 'ausstellungsdatum jünger als geburtsdatum'
            }
            if (inpAusstDatId.valueAsNumber > inpAblDatId.valueAsNumber) {
                throw 'ablaufdatum jünger als ausstellungsdatum'
            }
            if ((inpAblDatId.valueAsNumber - inpAusstDatId.valueAsNumber) > twenty) {
                throw 'pass darf nicht länger als 20 jahre älter sein'
            }
        }
        catch (errMessage) {
            infoMessageDiv.textContent = "Error Message: " + errMessage;
            infoMessageDiv.style.color = "red";
            console.log("Error Message: " + errMessage);
        }
        finally {
            /* das überschreibt die Fehlermeldung */
            console.log(errMessage); // undefined
            if (errMessage) {
                infoMessageDiv.innerHTML = "Danke für Ihre Angaben" + "&#127849";
                infoMessageDiv.style.color = "green";
            }
        }
    }

    // INPUT URL

    // INPUT SEARCH

    // INPUT FILE

    inpFile.addEventListener('input', handleFileInput);
    function handleFileInput() {
        console.log('inpFile.value :', inpFile.value); // C:\fakepath\selteneShortcuts.txt als string
    }
    // console.log('inpUrl2 :', inpUrl2);
    

    // SUBMIT EVENT
    firstForm.addEventListener('submit',showValidity)

function showValidity(event)
{
    console.log('event :', event);
    console.log('firstForm.validity :', firstForm.validity);
    // event.preventDefault()
}

    // document.forms
    console.log('document.forms :', document.forms);
</script>

</body>

</html>